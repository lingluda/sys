webpackJsonp([9],{664:function(e,t,a){a(700);var i=a(38)(a(686),a(717),null,null);i.options.__file="D:\\work\\stone-api\\webstatic\\sys\\src\\views\\dicBase\\process\\process.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] process.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},686:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(57),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={data:function(){var e=this;return{defaultList:[],editList:[],imgName:"",visible:!1,uploadList:[],imgUrl:"",tabload:!0,json:"",total:0,size:12,page:1,searchDate:{mobile:""},columns:[{title:"序号",type:"index",width:90,align:"center"},{title:"来源",key:"source"},{title:"加工名称",key:"name"},{title:"创建时间",key:"gmt_create"},{title:"更新时间",key:"gmt_modified"},{title:"操作",width:200,render:function(t,a){return t("div",[t("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){e.mod.edit=!0,e.formedit.name=a.row.name,e.formedit.id=a.row.id,e.formedit.path=a.row.path}}},"编辑"),t("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){e.curId=a.row.id,e.mod.del=!0}}},"删除")])}}],formValidate:{companyId:0,name:"",img:"jpg",imageId:"",source:"平台"},formedit:{companyId:0,name:"",img:"jpg",imageId:"",path:"",source:"平台"},ruleValidate:{name:[{required:!0,message:"请输入名称"}],img:[{required:!0,message:""}]},dts:[],curId:"",mod:{add:!1,showimg:!1,del:!1,edit:!1},loading:{add:!0}}},created:function(){this.getData()},mounted:function(){this.uploadList=this.$refs.upload.fileList},methods:{handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function(e,t){t.url=e.requestUrls,t.name=e.name},handleFormatError:function(e){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+e.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+e.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var e=this.uploadList.length<1;return e||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),e},getData:function(){var e=this;o.default.ajaxY("/sys/dicProcessMode/list",{companyId:0,pageIndex:this.page,pageSize:this.size},function(t){0==t.code&&(e.dts=t.data.rows,e.total=t.data.total)},e)},addbt:function(){this.$refs.formValidate.resetFields(),this.mod.add=!0},deleteFn:function(){var e=this;o.default.ajaxY("/sys/dicProcessMode/del",{id:this.curId},function(t){0==t.code&&(e.$Message.info(t.msg),e.mod.del=!1,e.getData())},e)},updateImage:function(e){console.log("21212",this.formedit.id);var t={type:0,path:this.uploadList[0].url.toString(),filename:this.uploadList[0].name,parentId:this.formedit.id},a=this;o.default.ajaxY("/common/updateImage",t,function(t){0==t.code&&(a.formedit.imageId=t.data.id,a.mod.add=!1,a.$Message.info("成功"),e())},a)},contrEditfn:function(){var e=this;this.updateImage(function(){e.$refs.formedit.validate(function(t){t&&o.default.ajaxY("/sys/dicProcessMode/update",e.formedit,function(t){0==t.code&&(e.mod.edit=!1,e.$Message.info("成功"),e.getData())},e)})})},saveImage:function(e){var t={type:0,path:this.uploadList[0].url.toString(),filename:this.uploadList[0].name},a=this;o.default.ajaxY("/common/saveImage",t,function(t){0==t.code&&(a.formValidate.imageId=t.data.id,a.mod.add=!1,a.$Message.info("成功"),e())},a)},contrAddfn:function(){var e=this;this.saveImage(function(){e.$refs.formValidate.validate(function(t){t&&o.default.ajaxY("/sys/dicProcessMode/insert",e.formValidate,function(t){0==t.code&&(e.mod.add=!1,e.$Message.info("成功"),e.getData())},e)})})},changePage:function(e){this.page=e,this.getData()}}}},700:function(e,t){},717:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Button",{attrs:{type:"info"},on:{click:e.addbt}},[e._v("新增")]),e._v(" "),a("Modal",{attrs:{title:"新增",width:"380"},model:{value:e.mod.add,callback:function(t){e.$set(e.mod,"add",t)},expression:"mod.add"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":86}},[a("FormItem",{attrs:{label:"名称：",prop:"name"}},[a("Input",{model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"说明图片：",prop:"img"}},[e._l(e.uploadList,function(t){return a("div",{staticClass:"demo-upload-list"},["finished"===t.status?[a("img",{attrs:{src:t.url}}),e._v(" "),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){e.handleRemove(t)}}})],1)]:[t.showProgress?a("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),e._v(" "),a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,type:"drag",action:"/oss/store/machining"}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"plus",size:"20"}})],1)])],2)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:e.contrAddfn}},[e._v("确定")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"编辑",width:"380"},model:{value:e.mod.edit,callback:function(t){e.$set(e.mod,"edit",t)},expression:"mod.edit"}},[a("Form",{ref:"formedit",attrs:{model:e.formedit,rules:e.ruleValidate,"label-width":86}},[a("FormItem",{attrs:{label:"名称：",prop:"name"}},[a("Input",{model:{value:e.formedit.name,callback:function(t){e.$set(e.formedit,"name",t)},expression:"formedit.name"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:function(t){e.contrEditfn()}}},[e._v("确定")])],1)],1),e._v(" "),a("Modal",{attrs:{width:"360"},model:{value:e.mod.del,callback:function(t){e.$set(e.mod,"del",t)},expression:"mod.del"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v("提示")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v("确定要删除？")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:""},on:{click:function(t){e.deleteFn()}}},[e._v("确定")])],1)])],1),e._v(" "),a("Row",{staticClass:"margin-top-10 tab minW"},[a("Table",{staticClass:"bgW",attrs:{loading:e.tabload,size:"small",stripe:"",border:"",columns:e.columns,data:e.dts}})],1),e._v(" "),a("Page",{staticClass:"taRit",attrs:{total:e.total,"page-size":e.size,"show-total":!0,current:e.page},on:{"on-change":e.changePage}})],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});