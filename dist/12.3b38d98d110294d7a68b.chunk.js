webpackJsonp([12],{674:function(t,e,a){var o=a(38)(a(697),a(714),null,null);o.options.__file="D:\\work\\stone-api\\webstatic\\sys\\src\\views\\userManage\\role\\role.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] role.vue: functional components are not supported with templates, they should use render functions."),t.exports=o.exports},697:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(57),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={data:function(){var t=this;return{imgUrl:"",tabload:!0,total:0,selRole:[],size:12,page:1,searchDate:{mobile:""},columns:[{title:"序号",type:"index",width:90,align:"center"},{title:"角色名称",key:"name"},{title:"角色说明",key:"description"},{title:"创建时间",key:"gmtCreate"},{title:"修改时间",key:"gmtModified"},{title:"操作",render:function(e,a){return e("div",[e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.dt=a.row,t.editValidate={name:a.row.name,description:a.row.description},t.mod.edit=!0}}},"编辑"),e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.curId=a.row.id,t.mod.del=!0}}},"删除")])}}],formValidate:{id:0,name:"",description:""},editValidate:{id:0,name:"",description:""},ruleValidate:{name:[{required:!0,message:"请输入角色名称"}]},dts:[],mod:{add:!1,showimg:!1,del:!1,costlist:!1,edit:!1},loading:{add:!0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={pageIndex:this.page,pageSize:this.size};i.default.ajaxY("/sys/sysRole/list",e,function(e){0==e.code&&(t.dts=e.data.rows,t.total=e.data.total)},t)},getcost:function(){var t=this,e={userid:this.curId,pageIndex:this.cost.page,pageSize:this.cost.size};i.default.ajaxY("order.MemUsingRecord",e,function(e){0==e.code&&(t.cost.costData.dts=e.data.rows,t.cost.total=e.data.total)},t)},trim:function(t){return t.replace(/^(\s|\xA0)+|(\s|\xA0)+$/g,"")},addbt:function(){this.$refs.formValidate.resetFields(),this.mod.add=!0},contrAddfn:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&i.default.ajaxY("/sys/sysRole/insert",t.formValidate,function(e){0==e.code&&(t.mod.add=!1,t.$Message.info("成功"),t.getData())},t)})},contrEditfn:function(){var t=this,e={id:this.dt.id,description:this.editValidate.description,name:this.editValidate.name};this.$refs.editValidate.validate(function(a){a&&i.default.ajaxY("/sys/sysRole/update",e,function(e){0==e.code&&(t.mod.edit=!1,t.$Message.info("成功"),t.getData())},t)}),this.contrRolefn(t.dt.id)},contrRolefn:function(){var t=this;if(console.log("  llll:"+this.selRole[0]),t.selRole==[])return t.$Message.error("请选择角色！"),!1;i.default.ajaxY("",{sysUserId:"",sysRoleId:""},function(e){0==e.code&&(t.$Message.info("成功"),t.getData(),t.mod.costlist=!1)},t)},deleteFn:function(){var t=this;i.default.ajaxY("/sys/sysRole/del",{id:this.curId},function(e){console.log(e.code),0==e.code&&(t.$Message.info(e.msg),t.mod.del=!1,t.getData())},t)},handleView:function(t){this.imgUrl=t,this.mod.showimg=!0},changePage:function(t){this.page=t,this.getData()},searchfn:function(){this.page=1,this.getData()},canclefn:function(){this.searchDate={mobile:""},this.dateval=["",""],this.getData()}}}},714:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Button",{attrs:{type:"info"},on:{click:t.addbt}},[t._v("新增")]),t._v(" "),a("Modal",{attrs:{title:"新增",width:"380"},model:{value:t.mod.add,callback:function(e){t.$set(t.mod,"add",e)},expression:"mod.add"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":86}},[a("FormItem",{attrs:{label:"角色名称：",prop:"name"}},[a("Input",{model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"角色说明"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"角色说明..."},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:t.contrAddfn}},[t._v("确定")])],1)],1),t._v(" "),a("Modal",{attrs:{title:"新增",width:"380"},model:{value:t.mod.edit,callback:function(e){t.$set(t.mod,"edit",e)},expression:"mod.edit"}},[a("Form",{ref:"editValidate",attrs:{model:t.editValidate,rules:t.ruleValidate,"label-width":86}},[a("FormItem",{attrs:{label:"角色名称：",prop:"name"}},[a("Input",{model:{value:t.editValidate.name,callback:function(e){t.$set(t.editValidate,"name",e)},expression:"editValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"角色说明"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"角色说明..."},model:{value:t.editValidate.description,callback:function(e){t.$set(t.editValidate,"description",e)},expression:"editValidate.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:t.contrEditfn}},[t._v("确定")])],1)],1),t._v(" "),a("Modal",{attrs:{title:"分配权限",width:"380"},model:{value:t.mod.costlist,callback:function(e){t.$set(t.mod,"costlist",e)},expression:"mod.costlist"}},[a("Form",{attrs:{"label-width":86}},[a("FormItem",{attrs:{label:"分配权限："}},[a("CheckboxGroup",{model:{value:t.selRole,callback:function(e){t.selRole=e},expression:"selRole"}},[a("Checkbox",{attrs:{label:"数字字典"}}),t._v(" "),a("Checkbox",{attrs:{label:"平台收费"}}),t._v(" "),a("Checkbox",{attrs:{label:"平台收费0"}}),t._v(" "),a("Checkbox",{attrs:{label:"数字字典8"}}),t._v(" "),a("Checkbox",{attrs:{label:"平台收费7"}}),t._v(" "),a("Checkbox",{attrs:{label:"平台收费9"}})],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:t.contrRolefn}},[t._v("确定")])],1)],1),t._v(" "),a("Modal",{attrs:{title:"查看图片",styles:{top:"20px"}},model:{value:t.mod.showimg,callback:function(e){t.$set(t.mod,"showimg",e)},expression:"mod.showimg"}},[a("img",{staticClass:"fulWidth",attrs:{src:t.imgUrl}})]),t._v(" "),a("Modal",{attrs:{width:"360"},model:{value:t.mod.del,callback:function(e){t.$set(t.mod,"del",e)},expression:"mod.del"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),t._v(" "),a("span",[t._v("提示")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v("确定要删除？")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:""},on:{click:function(e){t.deleteFn()}}},[t._v("确定")])],1)])],1),t._v(" "),a("Row",{staticClass:"margin-top-10 tab minW"},[a("Table",{staticClass:"bgW",attrs:{loading:t.tabload,size:"small",stripe:"",border:"",columns:t.columns,data:t.dts}})],1),t._v(" "),a("Page",{staticClass:"taRit",attrs:{total:t.total,"page-size":t.size,"show-total":!0,current:t.page},on:{"on-change":t.changePage}})],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});